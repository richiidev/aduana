(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"o+dm":function(o,e,t){"use strict";t.r(e),t.d(e,"PagosPageModule",(function(){return y}));var r=t("ofXK"),n=t("TEn/"),i=t("tyNb"),a=t("mrSG"),c=t("3Pt+"),s=t("AytR"),l=t("fXoL"),b=t("tk/3");function u(o,e){1&o&&(l.Kb(0,"p"),l.gc(1,"El RFC es necesario"),l.Jb())}function d(o,e){if(1&o&&(l.Kb(0,"ion-text",6),l.fc(1,u,2,0,"p",27),l.Kb(2,"p"),l.gc(3," El RFC "),l.Kb(4,"ion-badge",28),l.gc(5,"NO EXISTE"),l.Jb(),l.Jb(),l.Jb()),2&o){const o=l.Ub();l.xb(1),l.Zb("ngIf",(null==o.pagoForm.controls.rfc.errors?null:o.pagoForm.controls.rfc.errors.required)&&o.pagoForm.controls.rfc.dirty)}}function g(o,e){1&o&&(l.Kb(0,"ion-text",29),l.Kb(1,"p"),l.gc(2," El RFC "),l.Kb(3,"ion-badge",30),l.gc(4,"EXISTE"),l.Jb(),l.Jb(),l.Jb())}function p(o,e){if(1&o&&(l.Kb(0,"ion-item",31),l.Kb(1,"ion-label",29),l.gc(2),l.Jb(),l.Jb()),2&o){const o=l.Ub();l.xb(2),l.ic("PDF seleccionado: ",o.pdf.name,"")}}function m(o,e){if(1&o&&(l.Kb(0,"ion-item",31),l.Kb(1,"ion-label",29),l.gc(2),l.Jb(),l.Jb()),2&o){const o=l.Ub();l.xb(2),l.ic("XML seleccionado: ",o.xml.name,"")}}let h=(()=>{class o{constructor(o,e,t){this.http=o,this.toastCtrl=e,this.cargando=t}ngOnInit(){this.cargarForm()}crearPago(){return Object(a.b)(this,void 0,void 0,(function*(){yield this.mostrarCargando();const o={agente:this.pagoForm.value.agente,almacen:this.pagoForm.value.almacen,awb:this.pagoForm.value.awb,factura:this.pagoForm.value.factura,hbw:this.pagoForm.value.hbw,pedimento:this.pagoForm.value.pedimento,rfc:this.pagoForm.value.rfc,fecha:(new Date).toISOString()};this.subirArchivo(this.pagoForm.value.factura,this.pdf).then(()=>this.subirArchivo(this.pagoForm.value.factura,this.xml)).then(()=>this.http.post(s.a.apiUrl+"/pagos",o).toPromise()).then(o=>{console.log("Resp de crear factura",o),o.success?(this.cargando.dismiss(),this.mostrarToast("Se creo correctamente la factura","success"),this.pagoForm.reset({agente:null,almacen:null,awb:null,factura:null,hbw:null,pedimento:null,rfc:null,pdf:!1,xml:!1}),this.pdf=void 0,this.xml=void 0):(this.cargando.dismiss(),this.mostrarToast("Error al crear la factura","danger"))}).catch(o=>{this.cargando.dismiss(),this.mostrarToast("Error al crear la factura","danger"),console.log("Error al subir archivos",o)}),console.log("La factura final sera",o)}))}subirArchivo(o,e){const t=e.type.split("/")[1],r=new FormData;return r.append("file",e,o+"."+t),this.http.post(s.a.apiUrl+"/upload",r).toPromise().then(o=>{console.log("Resp para subir archivos",o)}).catch(o=>console.log("Error al subir archivos",o))}seleccionarArchivo(o){0==(o.target||o.srcElement).value.length?console.log("Cancelo la seleccion"):(console.log("Archivo seleccionado",o.target.files[0]),o.target.files[0].type.endsWith("/pdf")?(this.pdf=o.target.files[0],this.pagoForm.controls.pdf.setValue(!0)):o.target.files[0].type.endsWith("/xml")&&(this.xml=o.target.files[0],this.pagoForm.controls.xml.setValue(!0)))}mostrarCargando(){return Object(a.b)(this,void 0,void 0,(function*(){const o=yield this.cargando.create({message:"Subiendo archivos y guardando la factura, espere....",backdropDismiss:!1});yield o.present()}))}cargarForm(){this.pagoForm=new c.d({agente:new c.b(null,c.o.required),almacen:new c.b(null,c.o.required),awb:new c.b(null,c.o.required),factura:new c.b(null,c.o.required),hbw:new c.b(null,c.o.required),pedimento:new c.b(null,c.o.required),rfc:new c.b(null,c.o.required,this.rfcUnico.bind(this)),pdf:new c.b(!1,c.o.requiredTrue),xml:new c.b(!1,c.o.requiredTrue)})}rfcUnico(o){return new Promise((o,e)=>{this.http.get(`${s.a.apiUrl}/usuario/rfc/?rfc=${this.pagoForm.controls.rfc.value}`).subscribe(e=>{console.log("Se hizo bien",e),o(1==e.data.length?null:{existe:!0})},e=>{console.log("Se hizo MAL",e),o({existe:!0})})})}mostrarToast(o,e){return Object(a.b)(this,void 0,void 0,(function*(){return(yield this.toastCtrl.create({message:o,color:e,duration:3e3})).present()}))}}return o.\u0275fac=function(e){return new(e||o)(l.Hb(b.a),l.Hb(n.T),l.Hb(n.O))},o.\u0275cmp=l.Bb({type:o,selectors:[["app-crear-pago"]],decls:84,vars:6,consts:[[1,"ion-text-center"],["slot","start"],["routerLink","..","color","dark"],["name","chevron-back-circle"],[3,"formGroup","ngSubmit"],["position","floating"],["color","danger"],["required","","formControlName","agente","type","text"],["required","","formControlName","almacen","type","text"],["required","","formControlName","awb","type","text"],["required","","formControlName","factura","type","text"],["required","","formControlName","hbw","type","text"],["required","","formControlName","pedimento","type","text"],["required","","debounce","1000","formControlName","rfc","oninput","this.value = this.value.toUpperCase()","type","text"],["color","danger",4,"ngIf"],["color","success",4,"ngIf"],["fixed",""],["size","6"],["name","document-outline",2,"font-size","150px"],["color","dark","expand","block","shape","round",3,"click"],["slot","start","name","add"],["style","text-align: center;",4,"ngIf"],["name","code-working",2,"font-size","150px"],["expand","block","color","dark","shape","round",3,"click"],["expand","full",3,"disabled","click"],["type","file","accept",".pdf,.xml",2,"display","none",3,"change"],["archivos",""],[4,"ngIf"],["color","danger","mode","ios"],["color","success"],["color","success","mode","ios"],[2,"text-align","center"]],template:function(o,e){if(1&o){const o=l.Lb();l.Kb(0,"ion-header"),l.Kb(1,"ion-toolbar",0),l.Kb(2,"ion-buttons",1),l.Kb(3,"ion-button",2),l.Ib(4,"ion-icon",3),l.gc(5," Regresar "),l.Jb(),l.Jb(),l.Kb(6,"ion-title"),l.gc(7,"Crear pago"),l.Jb(),l.Jb(),l.Jb(),l.Kb(8,"ion-content"),l.Kb(9,"ion-card"),l.Kb(10,"form",4),l.Sb("ngSubmit",(function(){return e.crearPago()})),l.Kb(11,"ion-item"),l.Kb(12,"ion-label",5),l.gc(13,"Agente "),l.Kb(14,"ion-text",6),l.gc(15,"*"),l.Jb(),l.Jb(),l.Ib(16,"ion-input",7),l.Jb(),l.Kb(17,"ion-item"),l.Kb(18,"ion-label",5),l.gc(19,"Almacen "),l.Kb(20,"ion-text",6),l.gc(21,"*"),l.Jb(),l.Jb(),l.Ib(22,"ion-input",8),l.Jb(),l.Kb(23,"ion-item"),l.Kb(24,"ion-label",5),l.gc(25,"AWB "),l.Kb(26,"ion-text",6),l.gc(27,"*"),l.Jb(),l.Jb(),l.Ib(28,"ion-input",9),l.Jb(),l.Kb(29,"ion-item"),l.Kb(30,"ion-label",5),l.gc(31,"Factura "),l.Kb(32,"ion-text",6),l.gc(33,"*"),l.Jb(),l.Jb(),l.Ib(34,"ion-input",10),l.Jb(),l.Kb(35,"ion-item"),l.Kb(36,"ion-label",5),l.gc(37,"HBW "),l.Kb(38,"ion-text",6),l.gc(39,"*"),l.Jb(),l.Jb(),l.Ib(40,"ion-input",11),l.Jb(),l.Kb(41,"ion-item"),l.Kb(42,"ion-label",5),l.gc(43,"Pedimento "),l.Kb(44,"ion-text",6),l.gc(45,"*"),l.Jb(),l.Jb(),l.Ib(46,"ion-input",12),l.Jb(),l.Kb(47,"ion-item"),l.Kb(48,"ion-label",5),l.gc(49,"RFC "),l.Kb(50,"ion-text",6),l.gc(51,"*"),l.Jb(),l.Jb(),l.Ib(52,"ion-input",13),l.fc(53,d,6,1,"ion-text",14),l.fc(54,g,5,0,"ion-text",15),l.Jb(),l.Jb(),l.Jb(),l.Kb(55,"ion-card"),l.Kb(56,"ion-grid",16),l.Kb(57,"ion-row"),l.Kb(58,"ion-col",17),l.Kb(59,"ion-card"),l.Kb(60,"ion-card-header",0),l.Kb(61,"ion-card-title"),l.gc(62,"Archivo PDF necesario"),l.Jb(),l.Jb(),l.Kb(63,"ion-card-content",0),l.Ib(64,"ion-icon",18),l.Jb(),l.Kb(65,"ion-button",19),l.Sb("click",(function(){return l.cc(o),l.bc(83).click()})),l.gc(66," Seleccionar PDF "),l.Ib(67,"ion-icon",20),l.Jb(),l.fc(68,p,3,1,"ion-item",21),l.Jb(),l.Jb(),l.Kb(69,"ion-col",17),l.Kb(70,"ion-card"),l.Kb(71,"ion-card-header",0),l.Kb(72,"ion-card-title"),l.gc(73,"Archivo XML necesario"),l.Jb(),l.Jb(),l.Kb(74,"ion-card-content",0),l.Ib(75,"ion-icon",22),l.Jb(),l.Kb(76,"ion-button",23),l.Sb("click",(function(){return l.cc(o),l.bc(83).click()})),l.gc(77," Seleccionar XML "),l.Ib(78,"ion-icon",20),l.Jb(),l.fc(79,m,3,1,"ion-item",21),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Kb(80,"ion-button",24),l.Sb("click",(function(){return e.crearPago()})),l.gc(81," Crear pago "),l.Jb(),l.Jb(),l.Kb(82,"input",25,26),l.Sb("change",(function(o){return e.seleccionarArchivo(o)})),l.Jb(),l.Jb()}2&o&&(l.xb(10),l.Zb("formGroup",e.pagoForm),l.xb(43),l.Zb("ngIf",null==e.pagoForm.controls.rfc.errors?null:e.pagoForm.controls.rfc.errors.existe),l.xb(1),l.Zb("ngIf",e.pagoForm.controls.rfc.valid),l.xb(14),l.Zb("ngIf",null!=e.pdf),l.xb(11),l.Zb("ngIf",null!=e.xml),l.xb(1),l.Zb("disabled",e.pagoForm.invalid))},directives:[n.r,n.K,n.g,n.f,n.Q,i.g,n.s,n.J,n.n,n.h,c.p,c.j,c.e,n.u,n.v,n.I,n.t,n.S,c.n,c.i,c.c,r.j,n.q,n.A,n.m,n.j,n.k,n.i,n.e],styles:[""]}),o})();function f(o,e){1&o&&(l.Kb(0,"p"),l.gc(1,"El RFC es necesario"),l.Jb())}function J(o,e){if(1&o&&(l.Kb(0,"ion-text",8),l.fc(1,f,2,0,"p",19),l.Kb(2,"p"),l.gc(3," El RFC "),l.Kb(4,"ion-badge",20),l.gc(5,"NO EXISTE"),l.Jb(),l.Jb(),l.Jb()),2&o){const o=l.Ub();l.xb(1),l.Zb("ngIf",(null==o.pagoForm.controls.rfc.errors?null:o.pagoForm.controls.rfc.errors.required)&&o.pagoForm.controls.rfc.dirty)}}function K(o,e){1&o&&(l.Kb(0,"ion-text",21),l.Kb(1,"p"),l.gc(2," El RFC "),l.Kb(3,"ion-badge",22),l.gc(4,"EXISTE"),l.Jb(),l.Jb(),l.Jb())}let x=(()=>{class o{constructor(o,e,t){this.modalCtrl=o,this.http=e,this.toastCtrl=t,this.rfc=""}ngOnInit(){this.cargarFormulario(),this.modalCtrl.getTop().then(o=>{console.log("Los datos recibidos son: ",o.componentProps),this.rfc=o.componentProps.rfc,this.id=o.componentProps.id,this.pagoForm.setValue({agente:o.componentProps.agente,almacen:o.componentProps.almacen,awb:o.componentProps.awb,factura:o.componentProps.factura,hbw:o.componentProps.hbw,pedimento:o.componentProps.pedimento,rfc:o.componentProps.rfc})}).catch(o=>console.log("Error al cargar el modal",o))}editarPago(){const o=Object.assign(Object.assign({},this.pagoForm.value),{fecha:(new Date).toISOString(),id:this.id});this.http.put(s.a.apiUrl+"/pagos",o).subscribe(o=>{console.log("Resp de actualizar factura",o),o.success?this.cerrarModal(!0,o.data):this.mostrarToast("Error al crear la factura","danger")},o=>{this.mostrarToast("Error al crear la factura","danger"),console.log("Error al crear la factura",o)}),console.log("La factura final sera",o)}rfcUnico(o){return new Promise((o,e)=>Object(a.b)(this,void 0,void 0,(function*(){yield this.http.get(`${s.a.apiUrl}/usuario/rfc/?rfc=${this.pagoForm.controls.rfc.value}`).subscribe(e=>{console.log("Se hizo bien",e),o(1==e.data.length?null:{existe:!0})},e=>{console.log("Se hizo MAL",e),o({existe:!0})})})))}mostrarToast(o,e){return Object(a.b)(this,void 0,void 0,(function*(){return(yield this.toastCtrl.create({message:o,color:e,duration:3e3})).present()}))}cerrarModal(o,e){this.modalCtrl.dismiss({completado:o,nuevo:e})}cargarFormulario(){this.pagoForm=new c.d({agente:new c.b(null,c.o.required),almacen:new c.b(null,c.o.required),awb:new c.b(null,c.o.required),factura:new c.b(null,c.o.required),hbw:new c.b(null,c.o.required),pedimento:new c.b(null,c.o.required),rfc:new c.b(null,c.o.required,this.rfcUnico.bind(this))})}}return o.\u0275fac=function(e){return new(e||o)(l.Hb(n.P),l.Hb(b.a),l.Hb(n.T))},o.\u0275cmp=l.Bb({type:o,selectors:[["app-editar-pago"]],decls:71,vars:5,consts:[[1,"ion-text-center"],["slot","start"],["color","dark",3,"click"],["name","chevron-back-circle"],[3,"formGroup","ngSubmit"],["fixed",""],["size","6"],["position","floating"],["color","danger"],["required","","formControlName","agente","type","text"],["required","","formControlName","almacen","type","text"],["required","","formControlName","awb","type","text"],["required","","formControlName","factura","type","text"],["required","","formControlName","hbw","type","text"],["required","","formControlName","pedimento","type","text"],["required","","formControlName","rfc","type","text"],["color","danger",4,"ngIf"],["color","success",4,"ngIf"],["type","submit","expand","full",3,"disabled"],[4,"ngIf"],["color","danger","mode","ios"],["color","success"],["color","success","mode","ios"]],template:function(o,e){1&o&&(l.Kb(0,"ion-header"),l.Kb(1,"ion-toolbar",0),l.Kb(2,"ion-buttons",1),l.Kb(3,"ion-button",2),l.Sb("click",(function(){return e.cerrarModal(!1)})),l.Ib(4,"ion-icon",3),l.gc(5," Cancelar "),l.Jb(),l.Jb(),l.Kb(6,"ion-title"),l.gc(7),l.Jb(),l.Jb(),l.Jb(),l.Kb(8,"ion-content"),l.Kb(9,"ion-card"),l.Kb(10,"ion-card-header",0),l.Kb(11,"ion-card-title"),l.gc(12,"Ingresa los nuevos datos "),l.Jb(),l.Jb(),l.Kb(13,"ion-card-content"),l.Kb(14,"form",4),l.Sb("ngSubmit",(function(){return e.editarPago()})),l.Kb(15,"ion-grid",5),l.Kb(16,"ion-row"),l.Kb(17,"ion-col",6),l.Kb(18,"ion-item"),l.Kb(19,"ion-label",7),l.gc(20,"Agente "),l.Kb(21,"ion-text",8),l.gc(22,"*"),l.Jb(),l.Jb(),l.Ib(23,"ion-input",9),l.Jb(),l.Jb(),l.Kb(24,"ion-col",6),l.Kb(25,"ion-item"),l.Kb(26,"ion-label",7),l.gc(27,"Almacen "),l.Kb(28,"ion-text",8),l.gc(29,"*"),l.Jb(),l.Jb(),l.Ib(30,"ion-input",10),l.Jb(),l.Jb(),l.Jb(),l.Kb(31,"ion-row"),l.Kb(32,"ion-col",6),l.Kb(33,"ion-item"),l.Kb(34,"ion-label",7),l.gc(35,"AWB "),l.Kb(36,"ion-text",8),l.gc(37,"*"),l.Jb(),l.Jb(),l.Ib(38,"ion-input",11),l.Jb(),l.Jb(),l.Kb(39,"ion-col",6),l.Kb(40,"ion-item"),l.Kb(41,"ion-label",7),l.gc(42,"Factura "),l.Kb(43,"ion-text",8),l.gc(44,"*"),l.Jb(),l.Jb(),l.Ib(45,"ion-input",12),l.Jb(),l.Jb(),l.Jb(),l.Kb(46,"ion-row"),l.Kb(47,"ion-col",6),l.Kb(48,"ion-item"),l.Kb(49,"ion-label",7),l.gc(50,"HBW "),l.Kb(51,"ion-text",8),l.gc(52,"*"),l.Jb(),l.Jb(),l.Ib(53,"ion-input",13),l.Jb(),l.Jb(),l.Kb(54,"ion-col",6),l.Kb(55,"ion-item"),l.Kb(56,"ion-label",7),l.gc(57,"Pedimento "),l.Kb(58,"ion-text",8),l.gc(59,"*"),l.Jb(),l.Jb(),l.Ib(60,"ion-input",14),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Kb(61,"ion-item"),l.Kb(62,"ion-label",7),l.gc(63,"RFC "),l.Kb(64,"ion-text",8),l.gc(65,"*"),l.Jb(),l.Jb(),l.Ib(66,"ion-input",15),l.fc(67,J,6,1,"ion-text",16),l.fc(68,K,5,0,"ion-text",17),l.Jb(),l.Kb(69,"ion-button",18),l.gc(70," Actualizar pago "),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb()),2&o&&(l.xb(7),l.ic("RFC ",e.rfc,""),l.xb(7),l.Zb("formGroup",e.pagoForm),l.xb(53),l.Zb("ngIf",null==e.pagoForm.controls.rfc.errors?null:e.pagoForm.controls.rfc.errors.existe),l.xb(1),l.Zb("ngIf",e.pagoForm.controls.rfc.valid),l.xb(1),l.Zb("disabled",e.pagoForm.untouched))},directives:[n.r,n.K,n.g,n.f,n.s,n.J,n.n,n.h,n.j,n.k,n.i,c.p,c.j,c.e,n.q,n.A,n.m,n.u,n.v,n.I,n.t,n.S,c.n,c.i,c.c,r.j,n.e],styles:[""]}),o})();var v=t("lGQG");function F(o,e){if(1&o){const o=l.Lb();l.Kb(0,"ion-item"),l.Kb(1,"ion-checkbox",5),l.Sb("ngModelChange",(function(t){return l.cc(o),e.$implicit.check=t})),l.Jb(),l.Kb(2,"ion-label"),l.gc(3," RFC "),l.Kb(4,"p"),l.gc(5),l.Jb(),l.Jb(),l.Kb(6,"ion-label"),l.gc(7," Agente "),l.Kb(8,"p"),l.gc(9),l.Jb(),l.Jb(),l.Kb(10,"ion-label"),l.gc(11," Factura "),l.Kb(12,"p"),l.gc(13),l.Jb(),l.Jb(),l.Kb(14,"ion-label"),l.gc(15," pedimento "),l.Kb(16,"p"),l.gc(17),l.Jb(),l.Jb(),l.Kb(18,"ion-label"),l.gc(19," Fecha "),l.Kb(20,"p"),l.gc(21),l.Jb(),l.Jb(),l.Jb()}if(2&o){const o=e.$implicit;l.xb(1),l.Zb("ngModel",o.check),l.xb(4),l.ic(" ",o.rfc," "),l.xb(4),l.ic(" ",o.agente," "),l.xb(4),l.ic(" ",o.factura," "),l.xb(4),l.ic(" ",o.pedimento," "),l.xb(4),l.ic(" ",o.fecha," ")}}const C=[{path:"",component:(()=>{class o{constructor(o,e,t,r,n){this.http=o,this.actionSheetController=e,this.modalCtrl=t,this.toastCtrl=r,this.auth=n,this.seleccionados=[]}ngOnInit(){this.cargarPagos()}seleccionar(){this.pagos.forEach((o,e)=>{o.check&&this.seleccionados.push({index:e,factura:o.factura})}),1==this.seleccionados.length?this.mostrarOpcionesIndividual(this.seleccionados[0].index):this.mostrarOpcionesMultiple(),console.log("Seleccionados",this.seleccionados)}cargarPagos(){this.http.get(s.a.apiUrl+"/pagos").subscribe(o=>{o.data.length>0&&(this.pagos=o.data),console.log("Resp de las peticion",o)},o=>{console.log("Error al buscar pagos",o)})}buscarPago(o){console.log(o),this.pagoPeticion("prueba"==o.detail.value||13==o.detail.value.length?"rfc?rfc="+o.detail.value:"pago?factura="+o.detail.value)}mostrarOpcionesMultiple(){return Object(a.b)(this,void 0,void 0,(function*(){const o=yield this.actionSheetController.create({header:"Que deseas hacer con las facturas seleccionadas : ",cssClass:"my-custom-class",buttons:[{text:"Descargar xml y pdf seleccionados",icon:"cloud-download",handler:()=>{}},{text:"Eliminar",icon:"trash",handler:()=>{}},{text:"Canelar",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]});yield o.present()}))}mostrarOpcionesIndividual(o){return Object(a.b)(this,void 0,void 0,(function*(){const e=yield this.actionSheetController.create({header:"Que deseas hacer con la factura con RFC : "+this.pagos[o].rfc+", Agente: "+this.pagos[o].agente,cssClass:"my-custom-class",buttons:[{text:"Eliminar",icon:"trash",handler:()=>{this.eliminarPago(o)}},{text:"Editar",icon:"create",handler:()=>{this.editarFactura(o)}},{text:"Abrir archivo XML",icon:"code-working",handler:()=>{this.abrirArchivo(o,"xml")}},{text:"Abrir archivo PDF",icon:"document",handler:()=>{this.abrirArchivo(o,"pdf")}},{text:"Canelar",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]});yield e.present(),this.seleccionados=[]}))}abrirArchivo(o,e){var t=document.createElement("a");t.href=`${s.a.apiFile}/file/${this.pagos[o].factura}.${e}`,t.setAttribute("target","_blank"),t.click(),t.remove()}editarFactura(o){return Object(a.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:x,componentProps:this.pagos[o],backdropDismiss:!1});yield e.present();const t=yield e.onWillDismiss();t.data.completado&&(this.mostrarToast("Se gurdo correctamente","success"),console.log("ASi vienen los datos ",t.data),this.pagos[o]=t.data.nuevo)}))}eliminarPago(o){this.http.delete(`${s.a.apiUrl}/pagos/id?id=${this.pagos[o].id}`).subscribe(e=>{e.success?(this.actionSheetController.dismiss(),this.mostrarToast("Se elimino correctamente","success"),this.pagos.splice(o,1),console.log("Se deberia borrar",this.pagos),this.pagos=[...this.pagos]):this.mostrarToast("Algo salio mal...","danger")})}pagoPeticion(o){this.http.get(`${s.a.apiUrl}/pagos/${o}`).subscribe(o=>{o.data.length>0&&(this.pagos=o.data),console.log("Resp de las peticion",o)},o=>{console.log("Error al buscar pagos",o)})}mostrarToast(o,e){return Object(a.b)(this,void 0,void 0,(function*(){const t=yield this.toastCtrl.create({message:o,color:e,duration:3e3});yield t.present()}))}}return o.\u0275fac=function(e){return new(e||o)(l.Hb(b.a),l.Hb(n.a),l.Hb(n.P),l.Hb(n.T),l.Hb(v.a))},o.\u0275cmp=l.Bb({type:o,selectors:[["app-pagos"]],decls:10,vars:1,consts:[["color","dark",1,"ion-text-center"],["routerLink","crear"],["placeholder","Buscar pago por RFC o factura","inputmode","text","type","text","debounce","1000","oninput","this.value = this.value.toUpperCase()",3,"ionChange"],[3,"items"],[4,"virtualItem"],[3,"ngModel","ngModelChange"]],template:function(o,e){1&o&&(l.Kb(0,"ion-header"),l.Kb(1,"ion-toolbar",0),l.Kb(2,"ion-title"),l.gc(3,"Pagos"),l.Jb(),l.Kb(4,"ion-button",1),l.gc(5," Crear pago "),l.Jb(),l.Kb(6,"ion-searchbar",2),l.Sb("ionChange",(function(o){return e.buscarPago(o)})),l.Jb(),l.Jb(),l.Jb(),l.Kb(7,"ion-content"),l.Kb(8,"ion-virtual-scroll",3),l.fc(9,F,22,6,"ion-item",4),l.Jb(),l.Jb()),2&o&&(l.xb(8),l.Zb("items",e.pagos))},directives:[n.r,n.K,n.J,n.f,n.Q,i.g,n.B,n.S,n.n,n.L,n.U,n.u,n.l,n.c,c.i,c.k,n.v],styles:[""]}),o})()},{path:"crear",component:h}];let w=(()=>{class o{}return o.\u0275mod=l.Fb({type:o}),o.\u0275inj=l.Eb({factory:function(e){return new(e||o)},imports:[[i.h.forChild(C)],i.h]}),o})(),y=(()=>{class o{}return o.\u0275mod=l.Fb({type:o}),o.\u0275inj=l.Eb({factory:function(e){return new(e||o)},imports:[[r.b,n.M,w,c.f,c.m,b.b]]}),o})()}}]);