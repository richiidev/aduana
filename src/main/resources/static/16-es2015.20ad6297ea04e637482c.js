(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{xnqB:function(t,e,c){"use strict";c.r(e),c.d(e,"FacturasPageModule",(function(){return p}));var r=c("ofXK"),a=c("3Pt+"),n=c("TEn/"),o=c("tyNb"),i=c("mrSG"),s=c("AytR"),b=c("fXoL"),l=c("tk/3"),u=c("lGQG");function h(t,e){if(1&t){const t=b.Lb();b.Kb(0,"ion-item",3),b.Sb("click",(function(){b.cc(t);const c=e.index;return b.Ub().mostrarOpciones(c)})),b.Kb(1,"ion-label"),b.gc(2," RFC "),b.Kb(3,"p"),b.gc(4),b.Jb(),b.Jb(),b.Kb(5,"ion-label"),b.gc(6," Agente "),b.Kb(7,"p"),b.gc(8),b.Jb(),b.Jb(),b.Kb(9,"ion-label"),b.gc(10," Factura "),b.Kb(11,"p"),b.gc(12),b.Jb(),b.Jb(),b.Kb(13,"ion-label"),b.gc(14," pedimento "),b.Kb(15,"p"),b.gc(16),b.Jb(),b.Jb(),b.Kb(17,"ion-label"),b.gc(18," Fecha "),b.Kb(19,"p"),b.gc(20),b.Jb(),b.Jb(),b.Jb()}if(2&t){const t=e.$implicit;b.xb(4),b.ic(" ",t.rfc," "),b.xb(4),b.ic(" ",t.agente," "),b.xb(4),b.ic(" ",t.factura," "),b.xb(4),b.ic(" ",t.pedimento," "),b.xb(4),b.ic(" ",t.fecha," ")}}const d=[{path:"",component:(()=>{class t{constructor(t,e,c,r){this.http=t,this.toastCtrl=e,this.auth=c,this.actionSheetController=r,this.facturas=void 0}ngOnInit(){this.peticionFactura("facturas/agente?agente="+this.auth.usuario.rfc)}trackByFn(t,e){return t}mostrarOpciones(t){return Object(i.b)(this,void 0,void 0,(function*(){const e=yield this.actionSheetController.create({header:"Que deseas hacer con el pago con RFC : "+this.facturas[t].rfc+", Agente: "+this.facturas[t].agente,cssClass:"my-custom-class",buttons:[{text:"Abrir archivo XML",icon:"code-working",handler:()=>{this.abrirArchivo(t,"xml")}},{text:"Abrir archivo PDF",icon:"document",handler:()=>{this.abrirArchivo(t,"pdf")}},{text:"Canelar",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]});yield e.present()}))}abrirArchivo(t,e){const c=document.createElement("a");c.href=`${s.a.apiFile}/file/${this.facturas[t].factura}.${e}`,c.setAttribute("target","_blank"),c.click(),c.remove()}peticionFactura(t){this.http.get(`${s.a.apiUrl}/${t}`).subscribe(t=>{console.log("Resp de buscar factura",t),t.data.length>0?(this.facturas=t.data,this.mostrarToast("Se encontraron","success")):this.mostrarToast("No se encotraron","danger")},t=>{console.log("Error al buscar la factura",t)})}mostrarToast(t,e){return Object(i.b)(this,void 0,void 0,(function*(){const c=yield this.toastCtrl.create({message:t,color:e,duration:3e3});yield c.present()}))}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(l.a),b.Hb(n.U),b.Hb(u.a),b.Hb(n.a))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-facturas"]],decls:7,vars:2,consts:[["color","dark",1,"ion-text-center"],[3,"items","trackBy"],[3,"click",4,"virtualItem"],[3,"click"]],template:function(t,e){1&t&&(b.Kb(0,"ion-header"),b.Kb(1,"ion-toolbar",0),b.Kb(2,"ion-title"),b.gc(3,"Facturas"),b.Jb(),b.Jb(),b.Jb(),b.Kb(4,"ion-content"),b.Kb(5,"ion-virtual-scroll",1),b.fc(6,h,21,5,"ion-item",2),b.Jb(),b.Jb()),2&t&&(b.xb(5),b.Zb("items",e.facturas)("trackBy",e.trackByFn))},directives:[n.s,n.L,n.K,n.n,n.M,n.V,n.v,n.w],styles:[""]}),t})()}];let f=(()=>{class t{}return t.\u0275mod=b.Fb({type:t}),t.\u0275inj=b.Eb({factory:function(e){return new(e||t)},imports:[[o.h.forChild(d)],o.h]}),t})(),p=(()=>{class t{}return t.\u0275mod=b.Fb({type:t}),t.\u0275inj=b.Eb({factory:function(e){return new(e||t)},imports:[[r.b,a.e,n.N,f]]}),t})()}}]);