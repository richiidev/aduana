!function(){function o(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function e(o,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}function r(o,r,n){return r&&e(o.prototype,r),n&&e(o,n),o}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{IPPq:function(e,n,t){"use strict";t.r(n),t.d(n,"UsuariosTabsPageModule",(function(){return E}));var i=t("ofXK"),a=t("TEn/"),s=t("tyNb"),c=t("mrSG"),l=t("AytR"),u=t("3Pt+"),b=t("fXoL"),d=t("tk/3");function p(o,e){if(1&o&&(b.Kb(0,"ion-select-option",15),b.ec(1),b.Jb()),2&o){var r=e.$implicit;b.Xb("value",r.id),b.xb(1),b.fc(r.rol)}}var m,f=((m=function(){function e(r,n,t){o(this,e),this.modalCtrl=r,this.http=n,this.toastCtrl=t}return r(e,[{key:"ngOnInit",value:function(){var o=this;this.cargarForm(),this.modalCtrl.getTop().then((function(e){o.usuario=e.componentProps,console.log("Los datos recibidos son",e.componentProps),o.usuarioForm.setValue({correo:o.usuario.correo,idrol:o.usuario.idrol.id,nombre:o.usuario.nombre,apellidos:o.usuario.apellidos})})).catch((function(o){return console.log("Error al cargar el modal",o)}))}},{key:"actualizarUsuario",value:function(){var o=this,e={id:this.usuario.id,correo:this.usuarioForm.controls.correo.value,idrol:{id:this.usuarioForm.controls.idrol.value},nombre:this.usuarioForm.controls.nombre.value,apellidos:this.usuarioForm.controls.apellidos.value};this.http.put(l.a.apiUrl+"/usuario",e).subscribe((function(r){r.success?(console.log("Resp de actualizar usuario",r),o.cerrarModal(!0,e)):o.mostrarToast("Error algo salio mal...","danger")}),(function(e){o.mostrarToast("Error algo salio mal...","danger"),console.log("Error al actualizar el usuario",e)}))}},{key:"mostrarToast",value:function(o,e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.toastCtrl.create({message:o,color:e,duration:3e3});case 2:return r.abrupt("return",r.sent.present());case 3:case"end":return r.stop()}}),r,this)})))}},{key:"cargarForm",value:function(){var o=this;this.usuarioForm=new u.c({correo:new u.a(null,[u.l.required]),idrol:new u.a(null,u.l.required),nombre:new u.a(null,u.l.required),apellidos:new u.a(null,u.l.required)}),this.http.get(l.a.apiUrl+"/rol").subscribe((function(e){0!=e.data.length&&(o.roles=e.data),console.log("Resp de los roles",e)}),(function(o){console.log("Error en obtener roles",o)}))}},{key:"cerrarModal",value:function(o,e){this.modalCtrl.dismiss({completado:o,nuevo:e})}}]),e}()).\u0275fac=function(o){return new(o||m)(b.Hb(a.M),b.Hb(d.a),b.Hb(a.Q))},m.\u0275cmp=b.Bb({type:m,selectors:[["app-editar-usuario"]],decls:37,vars:5,consts:[[1,"ion-text-center"],["slot","start"],["color","dark",3,"click"],["name","chevron-back-circle"],[3,"formGroup"],["position","floating"],["color","danger"],["required","","formControlName","correo","type","text"],["required","","formControlName","nombre","type","text"],["required","","formControlName","apellidos","type","text"],["formControlName","idrol","interface","popover","placeholder","Roles"],[3,"value",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"disabled","click"],["name","save",2,"font-size","50px"],[3,"value"]],template:function(o,e){1&o&&(b.Kb(0,"ion-header"),b.Kb(1,"ion-toolbar",0),b.Kb(2,"ion-buttons",1),b.Kb(3,"ion-button",2),b.Sb("click",(function(){return e.cerrarModal(!1)})),b.Ib(4,"ion-icon",3),b.ec(5," Cancelar "),b.Jb(),b.Jb(),b.Kb(6,"ion-title"),b.ec(7),b.Jb(),b.Jb(),b.Jb(),b.Kb(8,"ion-content"),b.Kb(9,"ion-card"),b.Kb(10,"form",4),b.Kb(11,"ion-item"),b.Kb(12,"ion-label",5),b.ec(13,"Correo "),b.Kb(14,"ion-text",6),b.ec(15,"*"),b.Jb(),b.Jb(),b.Ib(16,"ion-input",7),b.Jb(),b.Kb(17,"ion-item"),b.Kb(18,"ion-label",5),b.ec(19,"Nombres"),b.Kb(20,"ion-text",6),b.ec(21,"*"),b.Jb(),b.Jb(),b.Ib(22,"ion-input",8),b.Jb(),b.Kb(23,"ion-item"),b.Kb(24,"ion-label",5),b.ec(25,"Apellidos"),b.Kb(26,"ion-text",6),b.ec(27,"*"),b.Jb(),b.Jb(),b.Ib(28,"ion-input",9),b.Jb(),b.Kb(29,"ion-item"),b.Kb(30,"ion-label"),b.ec(31,"Selecciona el rol del usuario"),b.Jb(),b.Kb(32,"ion-select",10),b.dc(33,p,2,2,"ion-select-option",11),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(34,"ion-fab",12),b.Kb(35,"ion-fab-button",13),b.Sb("click",(function(){return e.actualizarUsuario()})),b.Ib(36,"ion-icon",14),b.Jb(),b.Jb(),b.Jb()),2&o&&(b.xb(7),b.hc("",null==e.usuario?null:e.usuario.nombre," ",null==e.usuario?null:e.usuario.apellidos,""),b.xb(3),b.Xb("formGroup",e.usuarioForm),b.xb(23),b.Xb("ngForOf",e.roles),b.xb(2),b.Xb("disabled",!e.usuarioForm.touched))},directives:[a.o,a.H,a.e,a.d,a.p,a.G,a.k,a.f,u.m,u.i,u.d,a.r,a.s,a.F,a.q,a.P,u.k,u.h,u.b,a.z,a.O,i.h,a.l,a.m,a.A],styles:[""]}),m);function h(o,e){if(1&o&&(b.Kb(0,"ion-card"),b.Kb(1,"ion-card-header",0),b.Kb(2,"ion-card-title"),b.ec(3),b.Jb(),b.Jb(),b.Kb(4,"ion-card-content"),b.Kb(5,"ion-grid",6),b.Kb(6,"ion-row"),b.Kb(7,"ion-col",7),b.Kb(8,"ion-text",8),b.Kb(9,"h1"),b.ec(10,"Correo"),b.Jb(),b.Jb(),b.Jb(),b.Kb(11,"ion-col",7),b.Kb(12,"p",9),b.ec(13),b.Jb(),b.Jb(),b.Jb(),b.Kb(14,"ion-row"),b.Kb(15,"ion-col",7),b.Kb(16,"ion-text",8),b.Kb(17,"h1"),b.ec(18,"Nombres"),b.Jb(),b.Jb(),b.Jb(),b.Kb(19,"ion-col",7),b.Kb(20,"p",9),b.ec(21),b.Jb(),b.Jb(),b.Jb(),b.Kb(22,"ion-row"),b.Kb(23,"ion-col",7),b.Kb(24,"ion-text",8),b.Kb(25,"h1"),b.ec(26,"Apellidos"),b.Jb(),b.Jb(),b.Jb(),b.Kb(27,"ion-col",7),b.Kb(28,"p",9),b.ec(29),b.Jb(),b.Jb(),b.Jb(),b.Kb(30,"ion-row"),b.Kb(31,"ion-col",7),b.Kb(32,"ion-text",8),b.Kb(33,"h1"),b.ec(34,"Rol"),b.Jb(),b.Jb(),b.Jb(),b.Kb(35,"ion-col",7),b.Kb(36,"p",9),b.ec(37),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()),2&o){var r=b.Ub();b.xb(3),b.hc("",null==r.usuario?null:r.usuario.nombre," ",null==r.usuario?null:r.usuario.apellidos,""),b.xb(10),b.fc(r.usuario.correo),b.xb(8),b.gc(" ",r.usuario.nombre," "),b.xb(8),b.gc(" ",r.usuario.apellidos,""),b.xb(8),b.gc(" ",r.usuario.idrol.rol,"")}}var J,K=((J=function(){function e(r,n,t,i){o(this,e),this.http=r,this.toastCtrl=n,this.actionSheetController=t,this.modalCtrl=i}return r(e,[{key:"ngOnInit",value:function(){}},{key:"buscarUsuario",value:function(o){this.peticionUsuario(o.target.value)}},{key:"peticionUsuario",value:function(o){var e=this;this.http.get("".concat(l.a.apiUrl,"/usuario/rfc?rfc=").concat(o)).subscribe((function(o){console.log("Resp de buscar usuario",o),1==o.data.length?e.usuario=o.data[0]:(e.mostrarToast("No se encontro el usuario","danger"),e.usuario=void 0)}),(function(o){console.log("Error al buscar usuario",o)}))}},{key:"editarUsuario",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var e,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.modalCtrl.create({component:f,componentProps:this.usuario,backdropDismiss:!1});case 2:return e=o.sent,o.next=5,e.present();case 5:return o.next=7,e.onWillDismiss();case 7:(r=o.sent).data.completado&&(this.mostrarToast("Se gurdo correctamente"," success"),console.log("ASi vienen los datos ",r.data),this.usuario.correo=r.data.nuevo.correo,this.usuario.idrol.id=r.data.nuevo.idrol.id,this.usuario.nombre=r.data.nuevo.nombre,this.usuario.apellidos=r.data.nuevo.apellidos);case 9:case"end":return o.stop()}}),o,this)})))}},{key:"mostrarOpciones",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var e,r=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.actionSheetController.create({header:"Que deseas hacer con el usuario",cssClass:"my-custom-class",buttons:[{text:"Eliminar",icon:"trash",handler:function(){console.log("Delete clicked")}},{text:"Editar",icon:"create",handler:function(){r.editarUsuario()}},{text:"Canelar",icon:"close",role:"cancel",handler:function(){console.log("Cancel clicked")}}]});case 2:return e=o.sent,o.next=5,e.present();case 5:case"end":return o.stop()}}),o,this)})))}},{key:"mostrarToast",value:function(o,e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.toastCtrl.create({message:o,color:e,duration:3e3});case 2:return r.abrupt("return",r.sent.present());case 3:case"end":return r.stop()}}),r,this)})))}}]),e}()).\u0275fac=function(o){return new(o||J)(b.Hb(d.a),b.Hb(a.Q),b.Hb(a.a),b.Hb(a.M))},J.\u0275cmp=b.Bb({type:J,selectors:[["app-buscar-usuario"]],decls:10,vars:3,consts:[[1,"ion-text-center"],["placeholder","Ingresa el RFC del usuario","type","text",3,"debounce","ionChange"],[4,"ngIf"],["vertical","bottom","horizontal","start","slot","fixed"],[3,"disabled","click"],["name","man",2,"font-size","50px"],["fixed",""],["size","6"],["color","primary"],[2,"font-weight","bold","color","black"]],template:function(o,e){1&o&&(b.Kb(0,"ion-header"),b.Kb(1,"ion-toolbar",0),b.Kb(2,"ion-title"),b.ec(3,"Buscar usuario"),b.Jb(),b.Kb(4,"ion-searchbar",1),b.Sb("ionChange",(function(o){return e.buscarUsuario(o)})),b.Jb(),b.Jb(),b.Jb(),b.Kb(5,"ion-content"),b.dc(6,h,38,6,"ion-card",2),b.Kb(7,"ion-fab",3),b.Kb(8,"ion-fab-button",4),b.Sb("click",(function(){return e.mostrarOpciones()})),b.Ib(9,"ion-icon",5),b.Jb(),b.Jb(),b.Jb()),2&o&&(b.xb(4),b.Xb("debounce",1e3),b.xb(2),b.Xb("ngIf",null!=e.usuario),b.xb(2),b.Xb("disabled",null==e.usuario))},directives:[a.o,a.H,a.G,a.y,a.P,a.k,i.i,a.l,a.m,a.p,a.f,a.h,a.i,a.g,a.n,a.x,a.j,a.F],styles:[""]}),J);function g(o,e){1&o&&(b.Kb(0,"p"),b.ec(1,"El RFC es necesario"),b.Jb())}function v(o,e){if(1&o&&(b.Kb(0,"ion-text",3),b.dc(1,g,2,0,"p",16),b.Kb(2,"p"),b.ec(3," El RFC "),b.Kb(4,"ion-badge",17),b.ec(5,"NO ESTA disponible"),b.Jb(),b.Jb(),b.Jb()),2&o){var r=b.Ub();b.xb(1),b.Xb("ngIf",(null==r.usuarioForm.controls.rfc.errors?null:r.usuarioForm.controls.rfc.errors.required)&&r.usuarioForm.controls.rfc.dirty)}}function x(o,e){1&o&&(b.Kb(0,"ion-text",18),b.Kb(1,"p"),b.ec(2," El RFC esta "),b.Kb(3,"ion-badge",19),b.ec(4,"DISPONIBLE"),b.Jb(),b.Jb(),b.Jb())}function w(o,e){if(1&o&&(b.Kb(0,"ion-select-option",20),b.ec(1),b.Jb()),2&o){var r=e.$implicit;b.Xb("value",r.id),b.xb(1),b.fc(r.rol)}}function y(o,e){1&o&&(b.Kb(0,"ion-text",3),b.Kb(1,"p"),b.ec(2,"Las contrase\xf1as NO son iguales"),b.Jb(),b.Jb())}var F,C,k,I,R=((F=function(){function e(r,n){o(this,e),this.http=r,this.toastCtrl=n}return r(e,[{key:"ngOnInit",value:function(){this.cargarFormulario()}},{key:"registrarce",value:function(){var o=this,e={nombre:this.usuarioForm.controls.nombre.value,apellidos:this.usuarioForm.controls.apellidos.value,correo:this.usuarioForm.controls.correo.value,rfc:this.usuarioForm.controls.rfc.value,password:this.usuarioForm.controls.password2.value,idrol:{id:this.usuarioForm.controls.rol.value}};console.log("El usuario seria",e),this.http.post(l.a.apiUrl+"/usuario",e).subscribe((function(e){e.success?(o.mostrarToast("Se registro correctamente","success"),o.usuarioForm.reset({nombre:null,apellidos:null,correo:null,rfc:null,password:null,rol:null})):o.mostrarToast("Algo salio mal","danger"),console.log("Resp al crear usuario",e)}),(function(o){return console.log("Ocurrio un error al crear el usuario",o)}))}},{key:"mostrarToast",value:function(o,e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.toastCtrl.create({message:o,color:e,duration:3e3});case 2:return r.abrupt("return",r.sent.present());case 3:case"end":return r.stop()}}),r,this)})))}},{key:"cargarFormulario",value:function(){var o=this;this.usuarioForm=new u.c({nombre:new u.a(null,[u.l.required,u.l.minLength(6)]),apellidos:new u.a(null,[u.l.required,u.l.minLength(6)]),correo:new u.a(null,[u.l.required,u.l.minLength(6)]),rfc:new u.a(null,[u.l.required,u.l.minLength(6)],this.rfcUnico.bind(this)),rol:new u.a(null,[u.l.required]),password:new u.a(null,[u.l.required,u.l.minLength(5)]),password2:new u.a(null,[u.l.required,u.l.min(5)])},{validators:this.compararContras}),this.http.get(l.a.apiUrl+"/rol").subscribe((function(e){0!=e.data.length&&(o.roles=e.data),console.log("Resp de los roles",e)}),(function(o){console.log("Error en obtener roles",o)}))}},{key:"compararContras",value:function(o){return o.controls.password2.value===o.controls.password.value?null:{mismatch:!0}}},{key:"rfcUnico",value:function(o){var e=this;return new Promise((function(o,r){e.http.get("".concat(l.a.apiUrl,"/usuario/rfc/?rfc=").concat(e.usuarioForm.controls.rfc.value)).subscribe((function(e){console.log("Se hizo bien",e),o(1==e.data.length?{existe:!0}:null)}),(function(e){console.log("Se hizo MAL",e),o({existe:!0})}))}))}}]),e}()).\u0275fac=function(o){return new(o||F)(b.Hb(d.a),b.Hb(a.Q))},F.\u0275cmp=b.Bb({type:F,selectors:[["app-crear-usuario"]],decls:54,vars:6,consts:[["color","tertiary",1,"ion-text-center"],[3,"formGroup"],["position","floating"],["color","danger"],["required","","formControlName","nombre","type","text"],["required","","formControlName","apellidos","type","text"],["required","","formControlName","correo","type","text"],["debounce","1000","required","","formControlName","rfc","type","text"],["color","danger",4,"ngIf"],["color","success",4,"ngIf"],["formControlName","rol","interface","popover","placeholder","Roles"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","password","type","password"],["formControlName","password2","type","password"],["expand","full","color","primary",3,"disabled","click"],["name","person-add"],[4,"ngIf"],["color","danger","mode","ios"],["color","success"],["color","success","mode","ios"],[3,"value"]],template:function(o,e){1&o&&(b.Kb(0,"ion-header"),b.Kb(1,"ion-toolbar",0),b.Kb(2,"ion-title"),b.ec(3,"Crear usuario"),b.Jb(),b.Jb(),b.Jb(),b.Kb(4,"ion-content"),b.Kb(5,"ion-card"),b.Kb(6,"form",1),b.Kb(7,"ion-item"),b.Kb(8,"ion-label",2),b.ec(9,"Nombres "),b.Kb(10,"ion-text",3),b.ec(11,"*"),b.Jb(),b.Jb(),b.Ib(12,"ion-input",4),b.Jb(),b.Kb(13,"ion-item"),b.Kb(14,"ion-label",2),b.ec(15,"Apellidos "),b.Kb(16,"ion-text",3),b.ec(17,"*"),b.Jb(),b.Jb(),b.Ib(18,"ion-input",5),b.Jb(),b.Kb(19,"ion-item"),b.Kb(20,"ion-label",2),b.ec(21,"Correo electronico "),b.Kb(22,"ion-text",3),b.ec(23,"*"),b.Jb(),b.Jb(),b.Ib(24,"ion-input",6),b.Jb(),b.Kb(25,"ion-item"),b.Kb(26,"ion-label",2),b.ec(27,"RFC "),b.Kb(28,"ion-text",3),b.ec(29,"*"),b.Jb(),b.Jb(),b.Ib(30,"ion-input",7),b.dc(31,v,6,1,"ion-text",8),b.dc(32,x,5,0,"ion-text",9),b.Jb(),b.Kb(33,"ion-item"),b.Kb(34,"ion-label"),b.ec(35,"Selecciona el rol del usuario"),b.Jb(),b.Kb(36,"ion-select",10),b.dc(37,w,2,2,"ion-select-option",11),b.Jb(),b.Jb(),b.Kb(38,"ion-item"),b.Kb(39,"ion-label",2),b.ec(40,"Contrasena "),b.Kb(41,"ion-text",3),b.ec(42,"*"),b.Jb(),b.Jb(),b.Ib(43,"ion-input",12),b.Jb(),b.Kb(44,"ion-item"),b.Kb(45,"ion-label",2),b.ec(46,"Repite tu contrasena "),b.Kb(47,"ion-text",3),b.ec(48,"*"),b.Jb(),b.Jb(),b.Ib(49,"ion-input",13),b.dc(50,y,3,0,"ion-text",8),b.Jb(),b.Jb(),b.Kb(51,"ion-button",14),b.Sb("click",(function(){return e.registrarce()})),b.ec(52," Crear usuario "),b.Ib(53,"ion-icon",15),b.Jb(),b.Jb(),b.Jb()),2&o&&(b.xb(6),b.Xb("formGroup",e.usuarioForm),b.xb(25),b.Xb("ngIf",null==e.usuarioForm.controls.rfc.errors?null:e.usuarioForm.controls.rfc.errors.existe),b.xb(1),b.Xb("ngIf",e.usuarioForm.controls.rfc.valid),b.xb(5),b.Xb("ngForOf",e.roles),b.xb(13),b.Xb("ngIf",(null==e.usuarioForm.errors?null:e.usuarioForm.errors.mismatch)&&(e.usuarioForm.controls.password2.dirty||e.usuarioForm.controls.password2.touched)),b.xb(1),b.Xb("disabled",e.usuarioForm.invalid))},directives:[a.o,a.H,a.G,a.k,a.f,u.m,u.i,u.d,a.r,a.s,a.F,a.q,a.P,u.k,u.h,u.b,i.i,a.z,a.O,i.h,a.d,a.p,a.c,a.A],styles:[""]}),F),q=[{path:"",component:(C=function(){function e(){o(this,e)}return r(e,[{key:"ngOnInit",value:function(){}}]),e}(),C.\u0275fac=function(o){return new(o||C)},C.\u0275cmp=b.Bb({type:C,selectors:[["app-usuarios-tabs"]],decls:10,vars:0,consts:[["color","tertiary"],["tab","crear"],["name","add"],["tab","buscar"],["name","search"]],template:function(o,e){1&o&&(b.Kb(0,"ion-tabs"),b.Kb(1,"ion-tab-bar",0),b.Kb(2,"ion-tab-button",1),b.Ib(3,"ion-icon",2),b.Kb(4,"ion-label"),b.ec(5,"Crear"),b.Jb(),b.Jb(),b.Kb(6,"ion-tab-button",3),b.Ib(7,"ion-icon",4),b.Kb(8,"ion-label"),b.ec(9,"Buscar"),b.Jb(),b.Jb(),b.Jb(),b.Jb())},directives:[a.E,a.C,a.D,a.p,a.s],styles:[""]}),C),children:[{path:"",redirectTo:"crear",pathMatch:"full"},{path:"crear",component:R},{path:"buscar",component:K}]}],O=((I=function e(){o(this,e)}).\u0275mod=b.Fb({type:I}),I.\u0275inj=b.Eb({factory:function(o){return new(o||I)},imports:[[s.h.forChild(q)],s.h]}),I),E=((k=function e(){o(this,e)}).\u0275mod=b.Fb({type:k}),k.\u0275inj=b.Eb({factory:function(o){return new(o||k)},imports:[[i.b,a.J,O,u.e,u.j,d.b]]}),k)}}])}();