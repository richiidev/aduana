!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{xnqB:function(n,r,a){"use strict";a.r(r),a.d(r,"FacturasPageModule",(function(){return y}));var c=a("ofXK"),o=a("3Pt+"),i=a("TEn/"),s=a("tyNb"),u=a("mrSG"),b=a("AytR"),l=a("fXoL"),f=a("tk/3"),h=a("lGQG");function p(t,e){if(1&t){var n=l.Lb();l.Kb(0,"ion-item",3),l.Sb("click",(function(){l.cc(n);var t=e.index;return l.Ub().mostrarOpciones(t)})),l.Kb(1,"ion-label"),l.gc(2," RFC "),l.Kb(3,"p"),l.gc(4),l.Jb(),l.Jb(),l.Kb(5,"ion-label"),l.gc(6," Agente "),l.Kb(7,"p"),l.gc(8),l.Jb(),l.Jb(),l.Kb(9,"ion-label"),l.gc(10," Factura "),l.Kb(11,"p"),l.gc(12),l.Jb(),l.Jb(),l.Kb(13,"ion-label"),l.gc(14," pedimento "),l.Kb(15,"p"),l.gc(16),l.Jb(),l.Jb(),l.Kb(17,"ion-label"),l.gc(18," Fecha "),l.Kb(19,"p"),l.gc(20),l.Jb(),l.Jb(),l.Jb()}if(2&t){var r=e.$implicit;l.xb(4),l.ic(" ",r.rfc," "),l.xb(4),l.ic(" ",r.agente," "),l.xb(4),l.ic(" ",r.factura," "),l.xb(4),l.ic(" ",r.pedimento," "),l.xb(4),l.ic(" ",r.fecha," ")}}var d,m,v,g=[{path:"",component:(d=function(){function n(e,r,a,c){t(this,n),this.http=e,this.toastCtrl=r,this.auth=a,this.actionSheetController=c,this.facturas=void 0}var r,a,c;return r=n,(a=[{key:"ngOnInit",value:function(){this.peticionFactura("facturas/agente?agente="+this.auth.usuario.rfc)}},{key:"trackByFn",value:function(t,e){return t}},{key:"mostrarOpciones",value:function(t){return Object(u.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actionSheetController.create({header:"Que deseas hacer con el pago con RFC : "+this.facturas[t].rfc+", Agente: "+this.facturas[t].agente,cssClass:"my-custom-class",buttons:[{text:"Abrir archivo XML",icon:"code-working",handler:function(){r.abrirArchivo(t,"xml")}},{text:"Abrir archivo PDF",icon:"document",handler:function(){r.abrirArchivo(t,"pdf")}},{text:"Canelar",icon:"close",role:"cancel",handler:function(){console.log("Cancel clicked")}}]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"abrirArchivo",value:function(t,e){var n=document.createElement("a");n.href="".concat(b.a.apiFile,"/file/").concat(this.facturas[t].factura,".").concat(e),n.setAttribute("target","_blank"),n.click(),n.remove()}},{key:"peticionFactura",value:function(t){var e=this;this.http.get("".concat(b.a.apiUrl,"/").concat(t)).subscribe((function(t){console.log("Resp de buscar factura",t),t.data.length>0?(e.facturas=t.data,e.mostrarToast("Se encontraron","success")):e.mostrarToast("No se encotraron","danger")}),(function(t){console.log("Error al buscar la factura",t)}))}},{key:"mostrarToast",value:function(t,e){return Object(u.b)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toastCtrl.create({message:t,color:e,duration:3e3});case 2:return r=n.sent,n.next=5,r.present();case 5:case"end":return n.stop()}}),n,this)})))}}])&&e(r.prototype,a),c&&e(r,c),n}(),d.\u0275fac=function(t){return new(t||d)(l.Hb(f.a),l.Hb(i.U),l.Hb(h.a),l.Hb(i.a))},d.\u0275cmp=l.Bb({type:d,selectors:[["app-facturas"]],decls:7,vars:2,consts:[["color","dark",1,"ion-text-center"],[3,"items","trackBy"],[3,"click",4,"virtualItem"],[3,"click"]],template:function(t,e){1&t&&(l.Kb(0,"ion-header"),l.Kb(1,"ion-toolbar",0),l.Kb(2,"ion-title"),l.gc(3,"Facturas"),l.Jb(),l.Jb(),l.Jb(),l.Kb(4,"ion-content"),l.Kb(5,"ion-virtual-scroll",1),l.fc(6,p,21,5,"ion-item",2),l.Jb(),l.Jb()),2&t&&(l.xb(5),l.Zb("items",e.facturas)("trackBy",e.trackByFn))},directives:[i.s,i.L,i.K,i.n,i.M,i.V,i.v,i.w],styles:[""]}),d)}],k=((v=function e(){t(this,e)}).\u0275mod=l.Fb({type:v}),v.\u0275inj=l.Eb({factory:function(t){return new(t||v)},imports:[[s.h.forChild(g)],s.h]}),v),y=((m=function e(){t(this,e)}).\u0275mod=l.Fb({type:m}),m.\u0275inj=l.Eb({factory:function(t){return new(t||m)},imports:[[c.b,o.e,i.N,k]]}),m)}}])}();